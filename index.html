<!DOCTYPE html>

<head>

	<title>Justified Layout by Flickr</title>

	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">

	<style type="text/css" media="screen">
		.example {
			position: relative;
			background: blue;
		}
	</style>

	<script type="text/javascript" src="dist/justified-layout.js"></script>
	<script type="text/javascript">

		var halfSizeConfig = {
			containerWidth: 530,
			containerPadding: 5,
			boxSpacing: 5,
			targetRowHeight: 160
		};

		function generateJustifiedOutput(input, outputContainerSelector, config) {

			var justifiedLayout = require('justified-layout');
			var geometry = justifiedLayout(input, config);
			var boxes = geometry.boxes.map(function (box) {
				return  `<div class="box" style="width: ${box.width}px; height: ${box.height}px; top: ${box.top}px; left: ${box.left}px"></div>`;
			}).join('\n');

			document.querySelector(outputContainerSelector).innerHTML = boxes;
			document.querySelector(outputContainerSelector).style.height = geometry.containerHeight + "px";
			document.querySelector(outputContainerSelector).style.width = config.containerWidth + "px";

		}

	</script>

	<style type="text/css" media="screen">

		.justified {
			position: relative;
			background: seagreen;
			width: 1060px;
		}

		.box {
			position: absolute;
			background: yellowgreen;
		}

	</style>

</head>

<body>

	<h1><a href="https://github.com/flickr/justified-layout">Justified Layout</a> by <a href="https://www.flickr.com">Flickr</a></h1>

	<p>Accepts an array of boxes (with a lot of optional configuration options) and returns
		geometry for a nice justified layout as seen all over <a href="https://www.flickr.com/explore">Flickr</a>



	<h2>Installation</h2>

	<p><code>npm install justified-layout</code></p>



	<h2>Usage</h2>

	<p><code>var layoutGeometry = require('justified-layout')([1.33, 1, 0.65] [, config])</code></p>



	<h2>Inputs</h2>

	<p>There's two options for input. The simplest is an array of numbers representing aspect ratios. Alternatively
		you can pass in an array of objects with width and height properties.</p>

	<p>Aspect ratios option:</p>

	<p><code>[1.33, 1, 0.65]</code><p>

	<p>Size object option:</p>

	<p><code><pre>
[{
    width: 400,
    height: 300
},
{
    width: 300,
    height: 300
},
{
    width: 250,
    height: 400
}]
	</pre></code></p>



	<h2>Output</h2>

	<p>Something like this:</p>

	<p><code><pre>
{
    "containerHeight": 1269,
    "boxes": [
        {
            "aspectRatio": 0.5,
            "top": 10,
            "width": 170,
            "height": 340,
            "left": 10
        },
        {
            "aspectRatio": 1.5,
            "top": 10,
            "width": 510,
            "height": 340,
            "left": 190
        },
        ...
    ]
}
	</pre></code></p>



	<h2>Configuration Options</h2>

	<p>No configuration is required but chances are you'd like to change some things. Here are your options:</p>

	<table class="pure-table pure-table-striped">
		<thead>
			<tr>
				<th>Parameter</th>
				<th>Type</th>
				<th>Default</th>
				<th>Description</th>
			</tr>
		</thead>
		<tr>
			<td><code>containerWidth</code></td>
			<td>Integer</td>
			<td><code>1060</code></td>
			<td>The width that boxes will be contained within irrelevant of padding.</td>
		</tr>
		<tr>
			<td><code>containerPadding</code></td>
			<td>Integer or Object</td>
			<td><code>10</code></td>
			<td>Provide a single integer to apply padding to all sides or provide an object to apply
				individual values to each side, like this:

				<code><pre>
containerPadding: {
    top: 50,
    right: 5,
    bottom: 50,
    left: 5
}
				</pre></code>
			</td>
		</tr>
		<tr>
			<td><code>boxSpacing</code></td>
			<td>Integer or Object</td>
			<td><code>10</code></td>
			<td>Provide a single integer to apply spacing both horizontally and vertically or provide an object to
				apply individual values to each axis, like this:

				<code><pre>
boxSpacing: {
    horizontal: 10,
    vertical: 30
}
				</pre></code>
			</td>
		</tr>
		<tr>
			<td><code>targetRowHeight</code></td>
			<td>Integer</td>
			<td><code>320</code></td>
			<td>It's called a target because row height is the lever we use in order to fit
				everything in nicely. The algorithm will get as close to the target row height
				as it can.</td>
		</tr>
		<tr>
			<td><code>targetRowHeightTolerance</code></td>
			<td>Float</td>
			<td><code>0.25</code></td>
			<td>How far row heights can stray from <code>targetRowHeight</code>. <code>0</code> would
				force rows to be the <code>targetRowHeight</code> exactly and would likely make it
				impossible to justify. The value must be between <code>0</code> and <code>1</code>.</td>
		</tr>
		<tr>
			<td><code>maxNumRows</code></td>
			<td>Integer</td>
			<td><code>Number.POSITIVE_INFINITY</code></td>
			<td>Will stop adding rows at this number regardless of how many items still need to be
				laid out.</td>
		</tr>
		<tr>
			<td><code>forceAspectRatio</code></td>
			<td>Boolean or Float</td>
			<td><code>false</code></td>
			<td>Provide an aspect ratio here to return everything in that aspect ratio. Makes the values
				in your input array irrelevant. The length of the array remains relevant.</td>
		</tr>
		<tr>
			<td><code>alwaysDisplayOrphans</code></td>
			<td>Boolean</td>
			<td><code>true</code></td>
			<td>By default we'll return items at the end of a justified layout even if they don't make
				a full row. If <code>false</code> they'll be omitted from the output.</td>
		</tr>
		<tr>
			<td><code>fullWidthBreakoutRowCadence</code></td>
			<td>Boolean or Integer</td>
			<td><code>false</code></td>
			<td>If you'd like to insert a full width box every <code>n</code> rows you can specify
				it with this parameter. The box on that row will ignore the <code>targetRowHeight</code>,
				make itself as wide as <code>containerWidth</code> - <code>containerPadding</code> and be
				as tall as its aspect ratio defines. It'll only happen if that item has an aspect ratio >= 1.
				Best to have a look at the examples to see what this does.</td>
		</tr>
	</table>


	<h2>Live Examples</h2>

	<p>All examples scaled to half the size for better presentation here.</p>


	<h3>The Default</h3>

	<p><code>var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2, 2.1])</code></p>

	<div class="example example-default"></div>
	<script type="text/javascript">
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2, 2.1], '.example-default', halfSizeConfig);
	</script>


	<h3>Container Padding Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], {
	containerPadding: 50
})
	</pre></code></p>

	<div class="example example-containerPadding"></div>
	<script type="text/javascript">
		var halfSizeWithPadding = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithPadding.containerPadding = 25;
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], '.example-containerPadding', halfSizeWithPadding);
	</script>


	<h3>Uneven Container Padding Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7], {
	containerPadding: {
		top: 50,
		right: 20,
		left: 200,
		bottom: 50
	}
})
	</pre></code></p>

	<div class="example example-containerPaddingUneven"></div>
	<script type="text/javascript">
		var halfSizeWithUnevenPadding = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithUnevenPadding.containerPadding = {
			top: 25,
			right: 10,
			left: 100,
			bottom: 25
		};
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7], '.example-containerPaddingUneven', halfSizeWithUnevenPadding);
	</script>


	<h3>Box Spacing Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], {
	boxSpacing: {
		horizontal: 4,
		vertical: 30
	}
})
	</pre></code></p>

	<div class="example example-boxSpacing"></div>
	<script type="text/javascript">
		var halfSizeWithBoxSpacing = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithBoxSpacing.boxSpacing = {
			horizontal: 2,
			vertical: 15
		};
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], '.example-boxSpacing', halfSizeWithBoxSpacing);
	</script>


	<h3>Target Row Height Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5, 0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2], {
	targetRowHeight: 100
})
	</pre></code></p>

	<div class="example example-height"></div>
	<script type="text/javascript">
		var halfSizeWithHeight = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithHeight.targetRowHeight = 50;
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5, 0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2], '.example-height', halfSizeWithHeight);
	</script>


	<h3>Force Aspect Ratio Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], {
	forceAspectRatio: 1
})
	</pre></code></p>

	<div class="example example-force"></div>
	<script type="text/javascript">
		var halfSizeWithForce = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithForce.forceAspectRatio = 1;
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], '.example-force', halfSizeWithForce);
	</script>


	<h3>Don't Display Orphans Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2], {
	alwaysDisplayOrphans: false
})
	</pre></code></p>

	<div class="example example-orphans"></div>
	<script type="text/javascript">
		var halfSizeWithOrphans = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithOrphans.alwaysDisplayOrphans = false;
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2], '.example-orphans', halfSizeWithOrphans);
	</script>


	<h3>Full Width Breakout Row Config</h3>

	<p><code><pre>
var geometry = justifiedLayout([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], {
	fullWidthBreakoutRowCadence: 2
})
	</pre></code></p>

	<div class="example example-breakout"></div>
	<script type="text/javascript">
		var halfSizeWithBreakout = JSON.parse(JSON.stringify(halfSizeConfig));
		halfSizeWithBreakout.fullWidthBreakoutRowCadence = 2;
		generateJustifiedOutput([0.5, 1.5, 1, 1.8, 0.4, 0.7, 0.9, 1.1, 1.7, 2.2, 1.5], '.example-breakout', halfSizeWithBreakout);
	</script>


</body>

